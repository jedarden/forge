/* FORGE Control Panel Styles
 * Supports responsive layouts for different terminal sizes:
 * - 199×38: Compact layout (-compact class)
 * - 199×55: Standard layout (-standard class, default)
 * - 199×70+: Large layout (-large class)
 * - Other sizes: Responsive fallback (-responsive class)
 */

/* =============================================================================
 * Dashboard Layout - Standard (199×55)
 * Default layout when no modifier class is applied
 * ============================================================================= */

#dashboard {
    height: 50;
    width: 1fr;
    padding: 0 1;
}

#dashboard.-standard {
    height: 50;
}

/* Top row: Workers, Tasks, Costs panels */
#top_row {
    height: 18;
    width: 1fr;
}

#left_col, #center_col, #right_col {
    height: 1fr;
    width: 1fr;
}

/* Middle row: Metrics panel */
#middle_row {
    height: 10;
    width: 1fr;
}

#metrics_col {
    height: 1fr;
    width: 1fr;
}

#spacer {
    height: 1fr;
    width: 1fr;
}

/* Bottom row: Logs panel */
#bottom_row {
    height: 20;
    width: 1fr;
}

/* =============================================================================
 * Dashboard Layout - Compact (199×38)
 * Applied when terminal height < 45
 * ============================================================================= */

#dashboard.-compact {
    height: 33;
}

#dashboard.-compact #top_row {
    height: 12;
}

#dashboard.-compact #middle_row {
    height: 6;
}

#dashboard.-compact #bottom_row {
    height: 13;
}

/* Hide spacer in compact mode */
#dashboard.-compact #spacer {
    display: none;
}

/* =============================================================================
 * Dashboard Layout - Large (199×70+)
 * Applied when terminal height >= 65
 * ============================================================================= */

#dashboard.-large {
    height: 65;
}

#dashboard.-large #top_row {
    height: 22;
}

#dashboard.-large #middle_row {
    height: 14;
}

#dashboard.-large #bottom_row {
    height: 27;
}

/* =============================================================================
 * Dashboard Layout - Responsive Fallback
 * Uses flex units for unknown terminal sizes
 * ============================================================================= */

#dashboard.-responsive {
    height: 1fr;
}

#dashboard.-responsive #top_row {
    height: 35%;
}

#dashboard.-responsive #middle_row {
    height: 20%;
}

#dashboard.-responsive #bottom_row {
    height: 45%;
}

#dashboard.-responsive #spacer {
    display: none;
}

/* Chat container */
#chat_container {
    height: 3;
    width: 1fr;
    dock: top;
}

/* =============================================================================
 * Panel Styles
 * ============================================================================= */

WorkersPanel, TasksPanel, CostsPanel, MetricsPanel, LogsPanel, ChatPanel {
    background: $panel;
    border: thick $primary;
    border-title-align: left;
    padding: 0;
}

/* Panel subtitles are set in code via border_title() */

/* =============================================================================
 * Data Tables
 * ============================================================================= */

DataTable {
    height: 1fr;
}

DataTable > Header {
    background: $primary;
    text-style: bold;
}

DataTable > DataTableCursor {
    background: $secondary;
}

/* =============================================================================
 * Status Colors
 * ============================================================================= */

.status-active {
    color: $success;
    text-style: bold;
}

.status-idle {
    color: $warning;
}

.status-unhealthy {
    color: $error;
    text-style: bold;
}

.priority-p0 {
    color: $error;
    text-style: bold;
}

.priority-p1 {
    color: $warning;
}

.priority-p2 {
    color: $warning;
}

.priority-p3 {
    color: $text;
}

.priority-p4 {
    color: $text-secondary;
}

/* =============================================================================
 * Log Styles
 * ============================================================================= */

Log {
    background: $panel;
    scrollbar-size-vertical: 1;
}

.log-info {
    color: $text;
}

.log-warn {
    color: $warning;
    text-style: bold;
}

.log-error {
    color: $error;
    text-style: bold;
}

.log-success {
    color: $success;
}

/* =============================================================================
 * Input Styles
 * ============================================================================= */

Input {
    margin: 0 1;
}

Input.-focus {
    border: thick $accent;
}

/* =============================================================================
 * Progress Bars
 * ============================================================================= */

ProgressBar {
    width: 1fr;
}

ProgressBar > .bar-complete {
    background: $success;
}

ProgressBar > .bar-background {
    background: $panel;
}

/* =============================================================================
 * Utility Classes
 * ============================================================================= */

.text-green {
    color: $success;
}

.text-yellow {
    color: $warning;
}

.text-red {
    color: $error;
}

.text-cyan {
    color: $accent;
}

.text-dim {
    color: $text-secondary;
}

.text-bold {
    text-style: bold;
}

/* =============================================================================
 * Error Display Patterns (per ADR 0014)
 * ============================================================================= */

/* Notification Overlay Styles */
NotificationOverlay {
    layer: overlay;
}

.notification-container {
    background: $surface;
    border: thick $primary;
}

.notification-warning {
    background: $warning 15%;
    text-style: bold;
}

.notification-error {
    background: $error 15%;
    text-style: bold;
}

/* Component Error Styles */
ComponentErrorWidget {
    background: $error 10%;
    border: round $error;
}

.error-header {
    color: $error;
    text-style: bold;
}

.error-fallback {
    color: $warning;
    text-style: italic;
}

/* Fatal Error Screen Styles */
FatalErrorScreen {
    layer: overlay;
}

.fatal-container {
    background: $surface;
}

.fatal-title {
    color: $error;
    text-style: bold;
}

.fatal-errors {
    background: $error 10%;
    border: round $error;
}

.fatal-guidance {
    background: $panel;
    border: round $primary;
}

/* Error Dialog Styles */
ErrorDialog {
    layer: overlay;
}

.dialog-container {
    background: $surface;
    border: thick $error;
}

.dialog-title {
    color: $error;
    text-style: bold;
}

.dialog-message {
    background: $panel;
    border: round $primary;
}

.dialog-details {
    background: $panel;
    border: round $primary;
}
